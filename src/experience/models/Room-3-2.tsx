"use client";

/*
Auto-generated by: https://github.com/pmndrs/gltfjsx
Converted & cleaned for baked texture workflow
*/

import { useGLTF } from "@react-three/drei";
import React, { useMemo } from "react";
import { TextureLoader, Mesh } from "three";

type GLTFResult = {
  nodes: Record<string, Mesh>;
};

const Room3_2_Baked: React.FC<React.ComponentProps<"group">> = (props) => {
  // ðŸ”¹ Load GLTF model
  const { nodes } = useGLTF("/models/Room-3-2.glb") as unknown as GLTFResult;

  // ðŸ”¹ Load baked texture once
  const bakedTexture = useMemo(() => {
    const texture = new TextureLoader().load("/textures/Room3-2.jpg");
    texture.flipY = false;
    return texture;
  }, []);

  // ðŸ”¹ Render all meshes with the baked texture
  return (
    <group {...props} dispose={null}>
      {Object.entries(nodes).map(([name, node]) => (
        <mesh
          key={name}
          geometry={node.geometry}
          position={node.position ?? [0, 0, 0]}
          rotation={node.rotation ?? [0, 0, 0]}
        >
          <meshBasicMaterial map={bakedTexture} />
        </mesh>
      ))}
    </group>
  );
};

// ðŸ”¹ Preload model for performance
useGLTF.preload("/models/Room-3-2.glb");

export default Room3_2_Baked;
